# 功能5评分算法方案对比表

## 核心问题
- 输入：150,000+ 图片，每张都有TF-IDF关键词
- 训练数据：5个评分类别（80、90、95、98、100分）
- 输出：每张图片的预估分数（应该是0-100连续分布）

---

## 方案详细对比

| 序号 | 方案名称 | 核心公式 | 示例计算 | 优点 | 缺点 | 适用场景 |
|-----|--------|--------|--------|------|------|--------|
| **1** | **直接相似度** | `Score = Similarity × 100` | 相似度0.7 → 70分 | ✅ 最简单<br>✅ 0-100均匀分布<br>✅ 易理解 | ❌ 没有参考基线<br>❌ 相似度本身波动影响大 | 对分数分布要求不严格 |
| **2** | **中性点+相似度** | `Score = 50 + Sim × 50` | 相似度0.7 → 85分<br>相似度0.3 → 65分 | ✅ 有中性点(50分)<br>✅ 相似度变化映射明确<br>✅ 0-100范围 | ❌ 高质量样本不能达到100分<br>❌ 与实际文件夹评分脱节 | 需要中性参考点的场景 |
| **3** | **选最接近类别×相似度** | `Score = BestCategory × Sim` | 最接近95分类，相似度0.7 → 66.5分<br>最接近98分类，相似度0.9 → 88.2分 | ✅ 融合两个信息<br>✅ 分数有上界（最接近类别）<br>✅ 逻辑清晰 | ❌ 仍是离散分布（只能接近80/90/95/98/100）<br>❌ 分数较低 | 需要保留类别信息，希望分数偏保守 |
| **4** | **相似度加权平均** | `Score = Σ(类别×相似度) / Σ相似度` | 相似度0.7→95, 0.3→98, 0.1→80<br>= (95×0.7 + 98×0.3 + 80×0.1) / 1.1 ≈ 94分 | ✅ 综合多类别信息<br>✅ 分数偏保守合理 | ❌ 分数仍聚集在已有类别附近<br>❌ 相似度都很小时失效 | 多分类融合的专业场景 |
| **5** | **相似度排名法** | 按相似度排序，<br>top 10% → 95-100分<br>top 20% → 85-95分 | 相似度排名第1%<br> → 99分<br>排名第50%<br> → 50分 | ✅ 利用排名顺序<br>✅ 自动均匀分布<br>✅ 适应数据 | ❌ 依赖样本总量<br>❌ 不同数据集结果不可比<br>❌ 绝对分数不稳定 | 只关心相对排名的场景 |
| **6** | **分位数映射** | 计算相似度分位数，<br>0-25%Q → 0-30分<br>75-100%Q → 80-100分 | 相似度在75分位 → 75分 | ✅ 充分利用数据分布<br>✅ 自适应<br>✅ 均衡分布 | ❌ 实现复杂<br>❌ 需要重新计算分位数<br>❌ 不同批次数据结果不稳定 | 大数据集、需要均衡分布 |
| **7** | **概率型评分** | `Score = 50 + Sim × 50`<br>（语义：相似度=好图概率） | 相似度0.8 → 90分<br>（80%是好图） | ✅ 语义清晰<br>✅ 易于解释和调整<br>✅ 50分有意义 | ❌ 和方案2完全相同<br>❌ 与类别评分脱节 | 需要概率解释的场景 |
| **8** | **多维融合(平方权重)** | `Score = Σ(类别×相似度²) / Σ相似度²` | 同方案4但用相似度²作分母<br>更重视相似度高的 | ✅ 突出高相似度<br>✅ 分数更接近最接近类别 | ❌ 复杂度高<br>❌ 参数调整困难 | 需要突出高相似度的专业场景 |
| **9** | **容差范围型** | `Score = BestCat - (1-Sim)×Gap`<br>Gap通常为20-30 | 最接近95分，相似度0.85<br>= 95 - (0.15)×20 = 92分<br>最接近95分，相似度0.5<br>= 95 - (0.5)×20 = 85分 | ✅ 分数自然聚集在类别附近<br>✅ 有容差范围（符合直觉）<br>✅ 易调参 | ❌ 引入了Gap参数<br>❌ 需要调优 | 希望分数围绕类别分布的场景 |

---

## 推荐方案排序

### 🥇 第一选择：**方案3（选最接近类别×相似度）**
```
Score = BestCategorySimilarity × BestCategoryScore
Score = 0.85 × 95 = 80.75分
```
- **理由**：
  - 逻辑最清晰：找到最像的类别，再用相似度调整
  - 分数有意义：与文件夹实际评分挂钩
  - 保守合理：不会给出虚高的分数
  - 易于解释和调整
  - 完全利用现有信息

---

### 🥈 第二选择：**方案9（容差范围型）**
```
Gap = 20  # 类别间允许波动
Score = 95 - (1-0.85) × 20 = 92分
Score = 95 - (1-0.5) × 20 = 85分
```
- **理由**：
  - 分数更合理（不会低于70多分）
  - 相似度低时也能维持类别附近的评分
  - 只需调整一个Gap参数
  - 分布更自然

---

### 🥉 第三选择：**方案1（直接相似度）**
```
Score = 0.85 × 100 = 85分
Score = 0.5 × 100 = 50分
```
- **理由**：
  - 最简单，易实现
  - 如果相似度算法本身就很准确，这就够了
  - 缺点：与类别评分无关系

---

## 你应该选哪个？

**根据你的需求：**

| 需求 | 推荐方案 |
|------|--------|
| ✅ "95分文件夹的图片应该大概在95分左右" | **方案3或方案9** |
| ✅ "需要0-100连续分布" | **方案1或方案2** |
| ✅ "相似度应该直接反映分数" | **方案1** |
| ✅ "既要连续分布又要参考类别" | **方案9** |
| ✅ "最简单的实现" | **方案1** |
| ✅ "最可靠的评分逻辑" | **方案3** |

---

## 快速实现难度

| 方案 | 代码行数 | 复杂度 | 参数数量 |
|-----|--------|--------|--------|
| 1 | 5行 | ⭐ | 0 |
| 2 | 5行 | ⭐ | 0 |
| 3 | 15行 | ⭐⭐ | 0 |
| 4 | 20行 | ⭐⭐ | 0 |
| 5 | 30行 | ⭐⭐⭐ | 2-3个 |
| 6 | 40行 | ⭐⭐⭐ | 4-6个 |
| 7 | 5行 | ⭐ | 0 |
| 8 | 20行 | ⭐⭐ | 0 |
| 9 | 15行 | ⭐⭐ | 1个(Gap) |

---

## 我的最终建议

**优先试试方案3和方案9，因为：**
1. 它们直接利用你的文件夹评分（80/90/95/98/100）
2. 逻辑清晰易调优
3. 95分文件夹的图片自然倾向95分左右
4. 不会出现完全无关的分数

**如果分布还是不理想，再改用方案1**（纯相似度）试试

你想试哪个？我可以立即代码实现！
